#!/bin/sh

# commit-msg hook script

COMMIT_MSG_FILE=$1
PREFIX_REGEX="^JIRA-[0-9]+:"

# Read the first line of the commit message
first_line=$(head -n 1 "$COMMIT_MSG_FILE")

# Check if the first line matches the PREFIX_REGEX
if ! echo "$first_line" | grep -qE "$PREFIX_REGEX"; then
  echo "Error: Commit message must start with a prefix matching 'JIRA-[0-9]+:'"
  echo "Example: 'JIRA-1234: Your commit message'"
  exit 1
fi

exit 0
